<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine's day</title>

<style>
    
html, body{
height:100%;
}

@media (max-width:768px){

#finalContent{
flex-direction:column;
gap:25px;
padding-bottom:40px;
}

#finalLeft img{
width:160px;
}

#roulette{
width:240px;
height:240px;
}

#spinBtn{
font-size:16px;
padding:10px 20px;
}

}
body{
margin:0;
font-family:'Segoe UI', Tahoma, sans-serif;
overflow-y:hidden;
overflow-x: auto;
background:linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
background-size:400% 400%;
animation:gradientBG 15s ease infinite;
}

@keyframes gradientBG {
0% {background-position:0% 50%;}
50% {background-position:100% 50%;}
100% {background-position:0% 50%;}
}

/* ----------- RESPONSIVE : MOBILE FIRST ----------- */
.page{
position:absolute;
width:100%;
height:100%;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
backdrop-filter:blur(10px);
opacity:1;
transform:translateY(0);
transition: opacity 0.4s ease-out, transform 0.4s ease-out;
padding:20px; /* ESPACE MOBILE */
box-sizing:border-box;
}

.page.fade-out{
opacity:0;
transform:translateY(-15px);
}

/* MOBILE (Ã©crans < 768px) */
@media (max-width: 768px) {
  body { font-size: 16px; }
  
  #heart { font-size: 70px !important; } /* PLUS PETIT COEUR */
  
  .envelope { 
    width: 240px !important; 
    height: 160px !important; 
  }
  
  .card { 
    padding: 25px !important; 
    max-width: 95vw !important; 
    margin: 0 10px;
  }
  
  #typedText { 
    font-size: 16px !important; 
    min-height: 70px !important;
  }
  
  .choice { 
    gap: 15px !important; 
    font-size: 18px !important; 
  }
  
  label { 
    padding: 15px 25px !important; /* PLUS GRAND POUR DOIGT */
    min-height: 50px; /* TOUCH TARGET */
  }
  
  input { 
    width: 24px !important; 
    height: 24px !important; 
  }
  
  #final img { 
    width: 180px !important; 
    max-width: 90vw !important;
  }
  
  .petal { font-size: 18px !important; }
}

/* PETIT MOBILE (Ã©crans < 480px) */
@media (max-width: 480px) {
  #heart { font-size: 60px !important; }
  .envelope { width: 220px !important; height: 150px !important; }
  .card { padding: 20px !important; }
  h1, h2 { font-size: 1.4em !important; }
  p { font-size: 0.95em !important; }
}

/* TABLETTE */
@media (min-width: 769px) and (max-width: 1024px) {
  #heart { font-size: 80px; }
  .card { max-width: 500px; }
}

/* DESKTOP GRAND */
@media (min-width: 1200px) {
  .page { padding: 40px; }
  #heart { font-size: 100px; }
}

/* ---------- TOUT TON CSS VISUEL ---------- */
#intro{
background:linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
color:#d63384;
text-shadow:0 2px 4px rgba(0,0,0,0.3);
}

#heart{
font-size:90px;
cursor:pointer;
animation:pulse 1.5s infinite;
transition:transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
filter:drop-shadow(0 8px 16px rgba(255,105,180,0.6));
touch-action:manipulation; /* MOBILE SMOOTH */
}

#heart:active{ /* FEEDBACK TACTILE */
transform:scale(1.2) rotate(-5deg) !important;
}

#heart:hover{
transform:scale(1.3) rotate(-8deg);
animation:pause 0.3s forwards;
}

@keyframes pause{transform:scale(1.3) rotate(-8deg);}
@keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.2);}100%{transform:scale(1);}}

#envelopePage{
background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.envelope{
width:280px;height:200px;
background:linear-gradient(145deg, #ffecd2 0%, #fcb69f 100%);
position:relative;cursor:pointer;border-radius:20px;
box-shadow:0 20px 40px rgba(255,107,107,0.4), inset 0 1px 0 rgba(255,255,255,0.6);
touch-action:manipulation;
}

.envelope:active{
transform:scale(0.98);
}

.flap{
position:absolute;width:100%;height:100%;
background:linear-gradient(145deg, #ff6b6b 0%, #ee5a24 100%);
clip-path:polygon(0 0,100% 0,50% 60%);
transition:transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
border-radius:20px 20px 0 0;
}

.envelope.open .flap{
transform:rotateX(180deg) scale(0.95);transform-origin:top;box-shadow:0 -10px 20px rgba(0,0,0,0.2);
}

#cardPage{
background:linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
}

.card{
background:linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
padding:40px;border-radius:30px;width:90%;max-width:420px;
box-shadow:0 25px 50px rgba(255,105,180,0.3), 0 0 0 1px rgba(255,255,255,0.5);
text-align:center;position:relative;overflow:hidden;
}

.card::before{
content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;
background:radial-gradient(circle, rgba(255,182,193,0.1) 0%, transparent 70%);
animation:rotate 20s linear infinite;
}

@keyframes rotate{100%{transform:rotate(360deg);}}

#typedText{min-height:80px;color:#e91e63;font-size:18px;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,0.1);}
.choice{margin-top:25px;display:flex;flex-direction:column;gap:20px;font-size:20px;}
label{cursor:pointer;display:flex;align-items:center;gap:12px;padding:12px 20px;background:linear-gradient(145deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.4) 100%);border-radius:25px;backdrop-filter:blur(10px);transition:all 0.3s ease;box-shadow:0 4px 15px rgba(0,0,0,0.1);}
label:active{transform:scale(0.98) !important;} /* MOBILE FEEDBACK */
label:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(255,105,180,0.3);}
input{width:22px;height:22px;cursor:pointer;accent-color:#ff4081;}
#yesLabel{animation:glow 2s infinite;background:linear-gradient(145deg, rgba(255,105,180,0.2) 0%, rgba(255,182,193,0.4) 100%);}
@keyframes glow{0%{box-shadow:0 0 10px rgba(255,105,180,0.6);}50%{box-shadow:0 0 30px rgba(255,105,180,0.9), 0 0 40px rgba(255,105,180,0.6);}100%{box-shadow:0 0 10px rgba(255,105,180,0.6);}}
#noMessages{margin-top:15px;color:#e91e63;font-weight:600;min-height:40px;text-shadow:0 1px 2px rgba(0,0,0,0.1);}

#final{
background:linear-gradient(-45deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
color:#d63384;text-align:center;
}

#final img{width:220px;margin-top:15px;border-radius:20px;box-shadow:0 15px 30px rgba(0,0,0,0.3);transition:transform 0.3s ease;}
#final img:hover{transform:scale(1.05);}
#final img:active{transform:scale(0.98);}

.petal{position:fixed;top:-20px;font-size:24px;animation:fall linear forwards;filter:drop-shadow(0 4px 8px rgba(255,105,180,0.6));z-index:1000;}
@keyframes fall{to{transform:translateY(110vh) rotate(360deg);}}


#rouletteContainer{
margin-top:20px;
display:flex;
flex-direction:column;
align-items:center;
gap:15px;
}

#roulette{
background:white;
border-radius:50%;
box-shadow:0 10px 25px rgba(0,0,0,0.3);
}

.pointer{
font-size:30px;
margin-bottom:-20px;
}

#spinBtn{
padding:12px 25px;
border:none;
border-radius:20px;
cursor:pointer;
font-size:18px;
background:#ff4081;
color:white;
}

#finalContent{
display:flex;
gap:40px;
align-items:center;
justify-content:center;
flex-wrap:wrap;
}

/* COLONNE GAUCHE */
#finalLeft{
display:flex;
flex-direction:column;
align-items:center;
gap:10px;
}

/* COLONNE DROITE */
#finalRight{
display:flex;
flex-direction:column;
align-items:center;
}

/* RESPONSIVE MOBILE */
@media (max-width:768px){

#finalContent{
flex-direction:column;
}

#roulette{
width:250px;
height:250px;
}
}

#rouletteResult{
margin-top:15px;
font-size:22px;
font-weight:600;
color:#e91e63;
min-height:30px;
text-align:center;
animation:fadeIn 0.5s ease;
}

@keyframes fadeIn{
from{opacity:0; transform:translateY(10px);}
to{opacity:1; transform:translateY(0);}
}


</style>
</head>

<body>

<audio id="music" loop>
<source src="https://archive.org/download/sara-perche-ti-amo/Sar%C3%A0%20perch%C3%A9%20ti%20amo.mp3">
</audio>

<!-- TES PAGES -->
<div class="page" id="intro">
<h1>Buongiorno Principessa ğŸ‘¸ğŸ˜½</h1>
<p>Clique sur le cÅ“ur</p>
<div id="heart">ğŸ’–</div>
</div>

<div class="page" id="envelopePage" style="display:none;">
<div class="envelope" id="envelope">
<div class="flap"></div>
</div>
<p>Clique pour ouvrir ğŸ’Œ</p>
</div>

<div class="page" id="cardPage" style="display:none;">
<div class="card">
<h2>Veux-tu Ãªtre ma Juliette ? ğŸ¥¹</h2>
<p id="typedText"></p>
<div class="choice">
<label id="yesLabel">
<input type="checkbox" id="yesBox">
Oui ğŸ’–
</label>
<label>
<input type="checkbox" id="noBox">
Non ğŸ˜¢
</label>
</div>
<div id="noMessages"></div>
</div>
</div>

<div class="page" id="final" style="display:none;">

    <div id="finalContent">
    
    <div id="finalLeft">
    <h1>Je t'aime Nil ğŸ’•</h1><br>
    <h2>On se revoit bientÃ´t bichette prend soin de toi ğŸ˜½</h2>
    
    <img src="https://tenor.com/fr/view/a-gif-1444707562716253851.gif">
    <img src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExbWYzbXY2NWU4enY2NTY4MTJlbDA0dXplOXpjbGRzcjhmNTloOGI4aCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/C8ih1zB9e9KJLySClx/giphy.gif">
    </div>
    
    <div id="finalRight">
    
    <h2>A quel point je t'aime ? ğŸ¤”</h2>
    
    <div id="rouletteContainer">
    <div class="pointer">â–¼</div>
    <canvas id="roulette" width="300" height="300"></canvas>
    <button id="spinBtn">Tourner ğŸ¡</button>
    <div id="rouletteResult"></div>
    
    </div>
    
    </div>
    
    </div>
    

<!-- TON SCRIPT IDENTIQUE -->
<script>
const intro=document.getElementById("intro");
const envelopePage=document.getElementById("envelopePage");
const cardPage=document.getElementById("cardPage");
const final=document.getElementById("final");
const heart=document.getElementById("heart");
const envelope=document.getElementById("envelope");

const text="Nil, Sevgililer gÃ¼nÃ¼nde benimle sevgili olur musun ? ğŸŒ¹";
let i=0;
const typed=document.getElementById("typedText");

function typeWriter(){
if(i<text.length){
typed.innerHTML+=text.charAt(i);
i++;
setTimeout(typeWriter,40);
}
}

function transitionTo(nextPage) {
  intro.classList.add('fade-out');
  envelopePage.classList.add('fade-out');
  cardPage.classList.add('fade-out');
  final.classList.add('fade-out');
  
  setTimeout(() => {
    [intro, envelopePage, cardPage, final].forEach(page => {
      page.style.display = 'none';
      page.classList.remove('fade-out');
    });
    nextPage.style.display = 'flex';
  }, 400);
}

heart.onclick=()=>{
transitionTo(envelopePage);
};

envelope.onclick=()=>{
envelope.classList.add("open");
setTimeout(()=>{
transitionTo(cardPage);
typeWriter();
},700);
};

document.getElementById("yesBox").onclick=()=>{
transitionTo(final);
document.getElementById("music").play();
setInterval(()=>{
let p=document.createElement("div");
p.innerHTML="ğŸŒ¹";p.classList.add("petal");
p.style.left=Math.random()*100+"vw";
p.style.animationDuration=(3+Math.random()*2)+"s";
document.body.appendChild(p);
setTimeout(()=>p.remove(),5000);
},300);
};

const noBox=document.getElementById("noBox");
const msg=document.getElementById("noMessages");
let noCount=0;
const noTexts=["MÃªme pas un peu? ğŸ¥º","T'es sÃ»re ? ğŸ˜¢","RÃ©flÃ©chis encore ğŸ˜­","Erreur systÃ¨me â¤ï¸","Impossible de refuser RomÃ©o ğŸ˜Œ","NIL T'AS PAS LE CHOIXğŸ˜¡"];

noBox.onclick=(e)=>{
e.preventDefault();
msg.innerText=noTexts[Math.min(noCount,noTexts.length-1)];
noCount++;
};


/* -------- ROULETTE TRUQUÃ‰E -------- */

const canvas = document.getElementById("roulette");
const resultDiv = document.getElementById("rouletteResult");
const ctx = canvas.getContext("2d");

const choices = ["Pas du tout","CollÃ¨gue","Bof","Pas Trop","A L'INFINI","Vite Fait"];

/* ğŸ‘‡ CHOISIS LA CASE TRUQUÃ‰E ICI */
const forcedChoice = "A L'INFINI";

const segments = choices.length;
const anglePerSegment = 2*Math.PI/segments;

let currentAngle = 0;

function drawWheel(){
ctx.clearRect(0,0,300,300);

choices.forEach((choice,index)=>{

let start = currentAngle + index * anglePerSegment;
let end = start + anglePerSegment;

/* segment */
ctx.beginPath();
ctx.moveTo(150,150);
ctx.arc(150,150,150,start,end);
ctx.closePath();

ctx.fillStyle = `hsl(${index*60},70%,70%)`;
ctx.fill();
ctx.stroke();

/* texte */
ctx.save();

ctx.translate(150,150);
ctx.rotate(start + anglePerSegment/2);

ctx.fillStyle="black";
ctx.textAlign="center";
ctx.textBaseline="middle";
ctx.font="bold 16px Poppins";

ctx.fillText(choice,80,0);

ctx.restore(); // â­ TRÃˆS IMPORTANT

});
}


if(canvas){
drawWheel();
}

function spinWheel(){

let forcedIndex = choices.indexOf(forcedChoice);

/* angle exact de la case */
let targetAngle = (forcedIndex * anglePerSegment);

/* correction flÃ¨che en haut */
targetAngle += anglePerSegment / 2;

/* correction orientation canvas */
targetAngle = (3 * Math.PI / 2) - targetAngle;

let spins = 5;
let finalAngle = spins * 2 * Math.PI + targetAngle;

let duration = 3000;
let start = null;

function animate(timestamp){

if(!start) start = timestamp;
let progress = timestamp - start;

let ease = 1 - Math.pow(1 - progress/duration, 3);

currentAngle = finalAngle * ease;

drawWheel();

if(progress < duration){
requestAnimationFrame(animate);
}else{

resultDiv.innerText =  forcedChoice;

}
}

requestAnimationFrame(animate);
}



document.getElementById("spinBtn")?.addEventListener("click",spinWheel);

</script>

</body>
</html>
